# RPi_CODESYS_CNC

Raspberry Pi + CODESYS(SoftMotion CNC/ROBOTICS) + EtherCAT でどこまで汎用のCNCが作れるか挑戦しています。

現時点では、EtherCATのサーボドライブが無くても実行・検証できるよう、仮想EtherCATドライブで実行できるようにしています。

PCで仮想サーボドライブで正しく実装されたら、RPi+EtherCATサーボドライブでテストしてみようと思います。

EtherCATデバイス（ACサーボドライブの機材など）は高価なので、もし不要なものがありましたら、譲渡・貸与をお願い致します。

---

CODESYSのCNCは、DIN66025のGコードをサポートしますが、機能がやや限られていて、FANUCやSIEMENSのCNCの機能（使い勝手）には遠く及びません。


DIN66025
https://help.codesys.com/webapp/_sm_cnc_din66025_basics;product=codesys_softmotion;version=4.6.0.0

CODESYSでは、
１）6万以上のMコードをユーザーが自由に使用して拡張ができ、２つの浮動小数のパラメータを渡すことができます。
２）Gコード内にキーワードを置いて、実行中のCODESYS内の変数で置換して使用することができます。

これらを使い、PC側で単純な置換をすることで、CNCのプログラムをCODESYSのCNCで動作させることができると考えています。

具体的には、主軸回転数指令やG54/G53等を実装を計画しています。現時点では、主軸回転数指令を受け、変数に保持するところの実装は済んでいます。

１つ１つの機能として、CODESYSのMotion系のFBがありますが、UIとFBとGコードの組み合わせ、作りこみ、テストに時間と手間がかかると思われます。

本プロジェクトでは、汎用のCNCに近いものをCODESYSで実装し、どこまで実現できるのか、どこまで性能が発揮できるのか、テストして、性能や安定性の実用のベースになるものになるプロジェクトを目指しています。





